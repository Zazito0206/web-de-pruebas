<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Escritores en Proceso</title>
  <link rel="icon" href="/images/logo.png" />
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
  <link rel="manifest" href="manifest.json" />
</head>
<body>

<aside id="beta-banner" aria-label="Aviso importante" class="beta-banner">
  <p><strong>¿Has encontrado un error o tienes alguna sugerencia?</strong></p>
  <p>
    <a href="/contacto/contacto.html"><strong>Infórmanos aquí</strong></a>, estaremos encantados de mejorar contigo.
  </p>
  <button id="close-banner" aria-label="Cerrar aviso">&times;</button>
</aside>

<nav>
  <a href="index.html">
    <img src="images/logo.png" alt="Escritores en Proceso" class="logo-img" />
  </a>
  <div class="nav-links">
    <a href="index.html" class="activo">Inicio</a>
    <a href="sobre-nosotros/index.html">Sobre Nosotros</a>
    <a href="/solicitud/solicitud.html">¿Quieres subir tu libro?</a>
    <a href="/contacto/contacto.html">Contáctanos</a>

    <!-- Botón visible solo si no ha iniciado sesión -->
    <a href="/login/login.html" id="btn-login" class="btn-login">Iniciar sesión</a>

    <!-- Foto o avatar de usuario -->
    <div id="user-info" class="user-info" style="display: none;">
      <img id="user-photo" class="user-photo" src="" alt="Usuario" />
    </div>

    <button id="toggle-dark-mode" aria-label="Alternar modo oscuro">🌓</button>
  </div>

  <div id="resultadosBusqueda" class="resultados-busqueda"></div>
</nav>

<!-- Carruseles -->
<section class="libros-carrusel" id="recientes">
  <h3>Libros Recientes</h3>
  <p class="subtitulo-carrusel">Los títulos más nuevos añadidos por nuestros escritores.</p>
  <div class="contenedor-principal">
    <button class="flecha-izquierda" id="izquierda-recientes">&lt;</button>
    <div class="contenedor-carousel">
      <div class="carousel" id="carousel-recientes"></div>
    </div>
    <button class="flecha-derecha" id="derecha-recientes">&gt;</button>
  </div>
  <div class="indicadores" id="indicadores-recientes"></div>
</section>

<div id="carousel-recientes" class="carousel-container"></div>

<div id="carrusel-proximamente-container">
  <section class="libros-carrusel" id="proximamente">
    <h3>Libros Próximamente</h3>
    <p class="subtitulo-carrusel">Selección especial de libros que estarán disponibles pronto.</p>
    <div class="contenedor-principal">
      <button class="flecha-izquierda" id="izquierda-proximamente">&lt;</button>
      <div class="contenedor-carousel">
        <div class="carousel" id="carousel-proximamente"></div>
      </div>
      <button class="flecha-derecha" id="derecha-proximamente">&gt;</button>
    </div>
    <div class="indicadores" id="indicadores-proximamente"></div>
  </section>
</div>

<section class="libros-carrusel" id="populares">
  <h3>Libros Populares</h3>
  <p class="subtitulo-carrusel">Los libros que más han captado la atención de nuestra comunidad.</p>
  <div class="contenedor-principal">
    <button class="flecha-izquierda" id="izquierda-populares">&lt;</button>
    <div class="contenedor-carousel">
      <div class="carousel" id="carousel-populares"></div>
    </div>
    <button class="flecha-derecha" id="derecha-populares">&gt;</button>
  </div>
  <div class="indicadores" id="indicadores-populares"></div>
</section>

<!-- Scripts -->
<script src="https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.9.1/firebase-auth.js"></script>

<script>
  // Configuración de Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyCxyeiuOBCTwY1-Avq5TfOEa7HePsb2s9A",
    authDomain: "escritores-en-proceso-ep.firebaseapp.com",
    projectId: "escritores-en-proceso-ep",
    storageBucket: "escritores-en-proceso-ep.appspot.com",
    messagingSenderId: "1068751834388",
    appId: "1:1068751834388:web:2cc1b82d4e15db47970601"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  auth.onAuthStateChanged(user => {
    const btnLogin = document.getElementById("btn-login");
    const userInfo = document.getElementById("user-info");
    const userPhoto = document.getElementById("user-photo");

    if (user) {
      btnLogin.style.display = "none";
      userInfo.style.display = "block";

      if (user.photoURL) {
        userPhoto.src = user.photoURL;
      } else {
        const initials = user.displayName
          ? user.displayName.split(' ').map(n => n[0]).join('').toUpperCase()
          : user.email[0].toUpperCase();
        userPhoto.src = `https://via.placeholder.com/40x40.png?text=${initials}`;
      }
    } else {
      btnLogin.style.display = "inline-block";
      userInfo.style.display = "none";
    }
  });
</script>

<script src="proximos/proximos.js" defer></script>
<script src="main.js" defer></script>
</body>
</html>
